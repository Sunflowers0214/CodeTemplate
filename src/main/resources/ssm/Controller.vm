##首字母大写
#macro(firstToUpper $field)
$field.toUpperCase().substring(0,1)$field.substring(1)##
#end
##首字母小写
#macro(firstToLower $field)
$field.toLowerCase().substring(0,1)$field.substring(1)##
#end
package ${packageName}.${projectName.toLowerCase()}.controller;

import java.util.List;
import java.util.Map;
import ${pageBean};
import ${resultBean};
import ${jsonBean};
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;
import ${basePath}.BaseController;
import ${packageName}.${projectName.toLowerCase()}.model.#firstToUpper(${tableModel.tableLabel});
import ${packageName}.${projectName.toLowerCase()}.service.#firstToUpper(${tableModel.tableLabel})Service;

/**
 * @description $tableModel.tableComment控制层
 * @author ${author}
 * @version 1.0.0
 * @createtime $time
 */
@Controller
@RequestMapping("/#firstToLower($tableModel.tableLabel)")
public class #firstToUpper(${tableModel.tableLabel})Controller extends BaseController{

	@Autowired
	private #firstToUpper(${tableModel.tableLabel})Service #firstToLower($tableModel.tableLabel)Service;

	/**
	 * @description 分页信息查询$tableModel.tableComment
	 * @return
	 * @throws Exception
	 */
	@RequestMapping("/getListForPage")
	@ResponseBody
	public Result getListForPage(String data, Integer pageNo, Integer pageSize, String sort) throws Exception{
		Map map = JsonUtils.jsonToPojo(data, Map.class);
		Page page= #firstToLower($tableModel.tableLabel)Service.getListForPage(map, pageNo, pageSize, sort);
     	return new Result(page);
	}

	/**
	 * @description $tableModel.tableComment单条信息查询
	 * @return
	 * @throws Exception
	 */
	@RequestMapping("/get")
	@ResponseBody
	public Result get(String data) throws Exception{
		#firstToUpper(${tableModel.tableLabel}) queryEntity = JsonUtils.jsonToPojo(data,#firstToUpper(${tableModel.tableLabel}).class);
		#firstToUpper(${tableModel.tableLabel}) entity= #firstToLower($tableModel.tableLabel)Service.get(queryEntity);
		return new Result(entity);
	}

	/**
	 * @description 添加$tableModel.tableComment数据
	 * @return
	 * @throws Exception
	 */
	@RequestMapping("/insert")
	@ResponseBody
	public Result insert(String data) throws Exception{
		#firstToUpper(${tableModel.tableLabel}) insertEntity = JsonUtils.jsonToPojo(data,#firstToUpper(${tableModel.tableLabel}).class);
		#firstToLower($tableModel.tableLabel)Service.insert(insertEntity);
		return new Result(insertEntity);
	}

	/**
	 * @description 修改 $tableModel.tableComment数据
	 * @return
	 * @throws Exception
	 */
	@RequestMapping("/modify")
	@ResponseBody
	public Result modify(String data) throws Exception{
		#firstToUpper(${tableModel.tableLabel}) updateEntity = JsonUtils.jsonToPojo(data,#firstToUpper(${tableModel.tableLabel}).class);
		#firstToUpper(${tableModel.tableLabel}) updateWhere = new #firstToUpper(${tableModel.tableLabel})();
#foreach($field in $tableModel.columnList)
#if(${field.isPrimaryKey()})
		updateWhere.set#firstToUpper($field.columnLabel)(updateEntity.get#firstToUpper($field.columnLabel)());
#end#end
		updateEntity.setWhere(updateWhere);
		boolean flag = #firstToLower($tableModel.tableLabel)Service.update(updateEntity);
		return new Result(flag);
	}

	/**
	 * @description 删除$tableModel.tableComment数据
	 * @return
	 * @throws Exception
	 */
	@RequestMapping("/delete")
	@ResponseBody
	public Result delete(String data) throws Exception{
		#firstToUpper(${tableModel.tableLabel}) deleteEntity = JsonUtils.jsonToPojo(data,#firstToUpper(${tableModel.tableLabel}).class);
		#firstToUpper(${tableModel.tableLabel}) deleteWhere = new #firstToUpper(${tableModel.tableLabel})();
#foreach($field in $tableModel.columnList)
#if(${field.isPrimaryKey()})
		deleteWhere.set#firstToUpper($field.columnLabel)(deleteEntity.get#firstToUpper($field.columnLabel)());
#end#end
		deleteEntity.setWhere(deleteWhere);
		boolean flag = #firstToLower($tableModel.tableLabel)Service.delete(deleteEntity);
		return new Result(flag);
	}

	/**
	 * @description 不分页查询$tableModel.tableComment
	 * @return
	 * @throws Exception
	 */
	@RequestMapping("/getList")
	@ResponseBody
	public Result getList(String data) throws Exception{
		#firstToUpper(${tableModel.tableLabel}) queryEntity = JsonUtils.jsonToPojo(data,#firstToUpper(${tableModel.tableLabel}).class);
		List datalist = #firstToLower($tableModel.tableLabel)Service.getList(queryEntity);
		return new Result(datalist);
	}

}